<alfresco-config>

    <config evaluator="string-compare" condition="Remote">
      <remote>
        
        <!--
            OLD METHOD - Uses a custom connector to exchange the token for an access code. Subsequent requests are proxied
            straight through, passing the token from the client. The connector connects back to the repo directly to store
            the token (yuk), before returning to the client.
        -->
        
        <!-- Connector instances -->
        <!-- 
        <connector>
            <id>chatter-oauth</id>
            <name>Chatter OAuth 2.0 Connector</name>
            <description>HTTP Connector with support for OAuth authentication</description>
            <class>org.sharextras.webscripts.connector.HttpOAuth2Connector</class>
            <client-id>3MVG9rFJvQRVOvk5W_CrNgQGmoMhFjPC9PwFpIjLhSg7NbTgFtylPj3On557sgBstlxXsG.Xr2wQqfNkdMfKy</client-id>
            <client-secret>914216775528343297</client-secret>
        </connector>
        -->
        
        <!-- Endpoints -->
        <!--
        <endpoint>
          <id>chatter-oauth</id>
          <name>Chatter Authorization API (for obtaining an access token)</name>
          <connector-id>chatter-oauth</connector-id>
          <endpoint-url>https://login.salesforce.com</endpoint-url>
          <access-token-path>/services/oauth2/token</access-token-path>
        </endpoint>
        -->
        
        <!--
            NEW METHOD - Access token exchange is now performed by the OAuth2Return web script, which uses
            a credential store to persist the access token into the user's OAuth token store.
            
            Still requires that the client code provides a X-OAuth-Token header value with each request.
            
            TODO Provide an authenticator which will look up the tokens from the store and add to the request.
        -->
        <endpoint>
          <id>chatter</id>
          <name>Chatter REST API</name>
          <connector-id>oauth-token-passthru</connector-id>
          <endpoint-url>https://eu2.salesforce.com</endpoint-url>
        </endpoint>
        
      </remote>
    </config>
   
   <config evaluator="string-compare" condition="DocLibCustom">   
      <dependencies>
         <js src="/components/documentlibrary/actions/chatter-actions.js" />   
      </dependencies> 
   </config>
    
    <config evaluator="string-compare" condition="DocLibActions">
      <actions>
         <action id="document-post-to-chatter" type="javascript" label="actions.post-to-chatter" icon="salesforce-chatter">
            <param name="function">onActionPostToChatter</param>
         </action>
      </actions>
   </config>
   
   <config evaluator="string-compare" condition="DocLibActions">
      <actionGroups>
         <actionGroup id="document-browse">
            <action index="999" id="document-post-to-chatter" />
         </actionGroup>
         <actionGroup id="document-details">
            <action index="999" id="document-post-to-chatter" />
         </actionGroup>
      </actionGroups>
   </config>
   
</alfresco-config>